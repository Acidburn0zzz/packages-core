# Based on the file created for Arch Linux by:
# Dave Reisner <d@falconindy.com>

# Maintainer: Guinux <nuxgui@gmail.com>

pkgname=systemd-manjaro-units
pkgver=20120412
pkgrel=3
pkgdesc="Manjaro specific Systemd unit files"
arch=('any')
license=('MIT')
depends=()
install=systemd-manjaro-units.install
source=("systemd-arch-units-$pkgver.tar.gz::https://www.github.com/falconindy/systemd-arch-units/tarball/$pkgver"
        'gdm.service'
        'kdm.service'
        'slim.service'
        'lxdm.service'
        'rc-local.service'
        'rc-local-shutdown.service'
        'plymouth-transition.service'
        'wait-and-quit_plymouth')
sha256sums=('fda2843413b2e3d7d7989bd8812c285d860aaaff6bbf5ff923587c7448b811d6'
            '7c69211f2acb84e3d0e98da0db60462abf970653e1397e1a73a9436a4feb6907'
            'a12eb9a3e5952d331052541d82c4d5921e0555921dccb67cff580ab34e99ea19'
            'fcd0a794b4f84f839c4ba282a8ced9e0e0dff09230dea38a9217cfa997bc1cfe'
            '28ce9532fa61c85450e1e867f9a805a9432f4b6dbeab5036f3ca79efdcf543d7'
            '2e27fd62ec5e579e65f779710db2ddb10adf744077caabc2c15b44d040d0fc97'
            '308cd05122a3d30529e74b8562f89ee8abda9b40e4c2f890262ccb25097087b0'
            'ce57c64b9115a7896101fa009594976e62d04f892b130a132a9b8dc3bb59941a'
            '308e0c960c598ab0f74882cfa87dd73096990f27e44d4dcd3bf72c3d089bebf1')
            
package() {
  dirname=$(tar tf "$srcdir/systemd-arch-units-$pkgver.tar.gz" | sed 1q)

  cd "$srcdir/$dirname"

  make DESTDIR="$pkgdir" SD_LIBDIR="lib/systemd" install
  
  install -Dm644 "${srcdir}/gdm.service" "${pkgdir}/lib/systemd/system/gdm.service"
  install -Dm644 "${srcdir}/kdm.service" "${pkgdir}/lib/systemd/system/kdm.service"
  install -Dm644 "${srcdir}/slim.service" "${pkgdir}/lib/systemd/system/slim.service"
  install -Dm644 "${srcdir}/lxdm.service" "${pkgdir}/lib/systemd/system/lxdm.service"
  install -Dm644 "${srcdir}/rc-local.service" "${pkgdir}/lib/systemd/system/rc-local.service"
  install -Dm644 "${srcdir}/rc-local-shutdown.service" "${pkgdir}/lib/systemd/system/rc-local-shutdown.service"
  install -Dm644 "${srcdir}/plymouth-transition.service" "${pkgdir}/lib/systemd/system/plymouth-transition.service"
  install -Dm755 "${srcdir}/wait-and-quit_plymouth" "${pkgdir}/usr/bin/wait-and-quit_plymouth"
}
